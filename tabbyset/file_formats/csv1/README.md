# CSV1 File Format Description

## Overview

CSV1 specifies a list of test cases (scenarios). It is intended to be machine readable and human readable. Typically it is produced by a test generator tool, yet manual editing is possible. This file is then sent to the system model to produce CSV2, a more rich file, which besides the SUT inputs also includes the expected results.

## High level structure

Keywords `TEST_CASE_START` and `TEST_CASE_END` are used as separators. So the structure of CSV1 file is the following:

```
TEST_CASE_START  
<test case header>
<test case body>
TEST_CASE_END
TEST_CASE_START
<test case header>
<test case body>
TEST_CASE_END
...
```

## Test case header

Test case header consist of 3 lines:
1. The first line of the header is the test case name. That is an alphanumeric string with spaces (don’t use symbols like “,” or “;”). Preferably it should be globally unique. For that, a project name and a timestamp could be included. All test cases in one file must have different names. 
2. The second line of the header must be `NONE`. It was used in some legacy files to specify default `Symbol`.
3. The third line must be empty. It was used in legacy files as a comment, e.g. human oriented description of the scenario. This content will be removed in the future.

## Test case body

This part of the test case description is a regular CSV table. So, the first line has the column names and every data row describes one action (new order, update, mass cancel etc.). 

Below are additional requirements to the content of this table:

1. The first column must be `Status`.
2. Column `ID` is necessary and must have unique no-empty values. As an exception, the value of this field could be empty if the corresponding line specifies non-message action (GlobalStep, MarketSession etc.). 
3. Column `Action` is mandatory. It may have empty values, then the corresponding row is treated as a comment and ignored by the tools.
4. It is recommended to put columns `Protocol`, `ID`, `PreviousID`, `User`, `Action` at the start, just after the `Status` column.

## Examples

### Correct CSV1 file example

| TEST_CASE_START                                    |     |            |               |          |        |           |           |     |          |        |          |             |          |           |            |          |            |                  |           |              |
|----------------------------------------------------|-----|------------|---------------|----------|--------|-----------|-----------|-----|----------|--------|----------|-------------|----------|-----------|------------|----------|------------|------------------|-----------|--------------|
| 1831. july13_LYNX_NBBO_007_20240713_100206_218_218 |     |            |               |          |        |           |           |     |          |        |          |             |          |           |            |          |            |                  |           |              |
| NONE                                               |     |            |               |          |        |           |           |     |          |        |          |             |          |           |            |          |            |                  |           |              |
|                                                    |     |            |               |          |        |           |           |     |          |        |          |             |          |           |            |          |            |                  |           |              |
| Status                                             | ID  | PreviousID | Action        | User     | Symbol | Side      | OrderType | TIF | OrderQty | Price  | ExecInst | Account     | PriceBuy | PriceSell | Protection | ClientID | UMIRBypass | UMIRRegulationId | Anonymous | PostOnMarket |
|                                                    |     |            | NBBO          |          | EDDY   |           |           |     |          |        |          |             | 0        | 0         |            |          |            |                  |           |              |
|                                                    | O1  |            | New           | NFT0080U | EDDY   | Buy       | Pegged    | Day | 600      | 99.99  | R        |             |          |           | N          |          | N          | NA               |           | LYNX         |
|                                                    |     |            | NBBO          |          | EDDY   |           |           |     |          |        |          |             | 0        | 99.98     |            |          |            |                  |           |              |
|                                                    | O3  |            | New           | NFT0060U | EDDY   | SellShort | Pegged    | Day | 800      | 99.92  | M        |             |          |           |            |          |            |                  |           | LYNX         |
| Wait_6sec                                          |     |            | GlobalStep    |          |        |           |           |     |          |        |          |             |          |           |            |          |            |                  |           |              |
| DEFAULT                                            |     |            | MarketSession |          | EDDY   |           |           |     |          |        |          |             |          |           |            |          |            |                  |           |              |
|                                                    | O6  |            | New           | NFT0050U | EDDY   | Buy       | Limit     | IOC | 700      | 100.06 |          | NFT0050UAC2 |          |           | N          | O6       |            |                  | N         | LYNX         |
|                                                    | CO1 | O1         | Cancel        | NFT0080U | EDDY   | Buy       | Pegged    |     |          |        |          |             |          |           |            |          |            |                  |           |              |
|                                                    | CO3 | O3         | Cancel        | NFT0060U | EDDY   | SellShort | Pegged    |     |          |        |          |             |          |           |            |          |            |                  |           |              |
|                                                    | CO6 | O6         | Cancel        | NFT0050U | EDDY   | Buy       | Limit     |     |          |        |          |             |          |           |            |          |            |                  |           |              |
|                                                    |     |            | NBBO          |          | EDDY   |           |           |     |          |        |          |             | 99.8     | 100.2     |            |          |            |                  |           |              |
| TEST_CASE_END                                      |     |            |               |          |        |           |           |     |          |        |          |             |          |           |            |          |            |                  |           |              |

### Legacy CSV1 file example:

| TEST_CASE_START                                                                                                                                                                                                                                                                                                                                                                                                            |          |           |            |                |               |      |               |             |     |                   |          |            |             |      |                |              |                |                     |             |                       |                   |               |                 |            |         |        |                  |          |           |                 |              |        |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|-----------|------------|----------------|---------------|------|---------------|-------------|-----|-------------------|----------|------------|-------------|------|----------------|--------------|----------------|---------------------|-------------|-----------------------|-------------------|---------------|-----------------|------------|---------|--------|------------------|----------|-----------|-----------------|--------------|--------|
| TC47. Amendment of a Sell DAY Market-To-Limit order in which the price was decreased resulting in the order being aggressive and Fully Filled (Limit, Market-to-Limit, Limit Iceberg, Day)                                                                                                                                                                                                                                 |          |           |            |                |               |      |               |             |     |                   |          |            |             |      |                |              |                |                     |             |                       |                   |               |                 |            |         |        |                  |          |           |                 |              |        |
| 70778                                                                                                                                                                                                                                                                                                                                                                                                                      |          |           |            |                |               |      |               |             |     |                   |          |            |             |      |                |              |                |                     |             |                       |                   |               |                 |            |         |        |                  |          |           |                 |              |        |
| OB aggresive side: O5_Market-To-Limit(price5), O6_Limit(price5) Aggressive Side: Sell Specific submission parameters: No OB Contra side: O1_Iceberg(price1), O2_Iceberg(price1), O3_Limit(price5), O4_Iceberg(price1) Order amendment: O5_Market-To-Limit(price5) to price0 Specific amendment parameters: No Expected status after trade: FullFill Price levels (1-5): price5 > price4 >price3 > price2 > price1 > price0 |          |           |            |                |               |      |               |             |     |                   |          |            |             |      |                |              |                |                     |             |                       |                   |               |                 |            |         |        |                  |          |           |                 |              |        |
| Status                                                                                                                                                                                                                                                                                                                                                                                                                     | Protocol | ID        | PreviousID | Action         | User          | Side | OrderType     | ExchOrdType | TIF | ShortSellQuantity | Quantity | DisplayQty | Price       | Days | Client/Account | ExchangeInfo | CustomerInfo   | ClearingParticipant | CrossingKey | CapacityOfParticipant | DirectedWholesale | DeltaQuantity | BalanceQuantity | RejectCode | Country | Market | Instrument_group | Modifier | Commodity | Expiration_date | Strike_price | Symbol |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | PC1       |            | MassCancel_AUX | OMN_150USER22 |      |               |             |     |                   |          |            |             |      |                |              |                |                     |             |                       |                   |               |                 |            |         |        |                  |          |           |                 |              | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | PC2       |            | MassCancel_AUX | OMN_147USER22 |      |               |             |     |                   |          |            |             |      |                |              |                |                     |             |                       |                   |               |                 |            |         |        |                  |          |           |                 |              | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | PLR_70778 |            | PriceLimits    | XPLRP_FEED7   |      |               |             |     |                   |          |            | -2147483648 |      |                |              |                |                     |             |                       |                   |               |                 |            | 15      | 105    | 200              | 0        | 5242      | 0               | 0            | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | O1        |            | New            | OMN_150USER22 | Buy  | Limit         |             | DAY | 0                 | 1600     | 1000       | 2021        |      | Tc_001_011     | ASX          | ASX_OA_MTL_DAY | 5                   |             | P                     | N                 |               |                 |            |         |        |                  |          |           |                 |              | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | O2        |            | New            | OMN_150USER22 | Buy  | Limit         |             | DAY | 0                 | 2600     | 2000       | 2021        |      | Tc_001_021     | ASX          | ASX_OA_MTL_DAY | 5                   |             | P                     | N                 |               |                 |            |         |        |                  |          |           |                 |              | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | O3        |            | New            | OMN_150USER22 | Buy  | Limit         |             | DAY | 0                 | 3800     |            | 2025        |      | Tc_001_021     | ASX          | ASX_OA_MTL_DAY | 5                   |             | P                     | N                 |               |                 |            |         |        |                  |          |           |                 |              | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | O4        |            | New            | OMN_150USER22 | Buy  | Limit         |             | DAY | 0                 | 3600     | 3000       | 2021        |      | Tc_001_021     | ASX          | ASX_OA_MTL_DAY | 5                   |             | P                     | N                 |               |                 |            |         |        |                  |          |           |                 |              | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | O5        |            | New            | OMN_147USER22 | Sell | MarketToLimit |             | DAY | 0                 | 7800     |            | 0           |      | Tc_001_091     | ASX          | ASX_OA_MTL_DAY | 2                   |             | A                     | Y                 |               |                 |            |         |        |                  |          |           |                 |              | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | O6        |            | New            | OMN_147USER22 | Sell | Limit         |             | DAY | 0                 | 5620     |            | 2025        |      | Tc_001_001     | ASX          | ASX_OA_MTL_GTC | 2                   |             | A                     | Y                 |               |                 |            |         |        |                  |          |           |                 |              | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | A51       | O5         | Amend          | OMN_147USER22 | Sell | Limit         |             | DAY | 0                 | 0        |            | 0           |      |                |              |                |                     |             |                       |                   | 1             | 0               |            |         |        |                  |          |           |                 |              | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | PC3       |            | MassCancel_AUX | OMN_150USER22 |      |               |             |     |                   |          |            |             |      |                |              |                |                     |             |                       |                   |               |                 |            |         |        |                  |          |           |                 |              | 70778  |
|                                                                                                                                                                                                                                                                                                                                                                                                                            | Omnet    | PC4       |            | MassCancel_AUX | OMN_147USER22 |      |               |             |     |                   |          |            |             |      |                |              |                |                     |             |                       |                   |               |                 |            |         |        |                  |          |           |                 |              | 70778  |
| TEST_CASE_END                                                                                                                                                                                                                                                                                                                                                                                                              |          |           |            |                |               |      |               |             |     |                   |          |            |             |      |                |              |                |                     |             |                       |                   |               |                 |            |         |        |                  |          |           |                 |              |        |																															
